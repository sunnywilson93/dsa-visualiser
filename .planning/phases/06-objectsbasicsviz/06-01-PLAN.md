---
phase: 06-objectsbasicsviz
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Concepts/ObjectsBasicsViz.tsx
  - src/components/Concepts/ObjectsBasicsViz.module.css
autonomous: true

must_haves:
  truths:
    - "User can step through object reference examples showing stack/heap model"
    - "Objects display as key-value pairs in heap boxes"
    - "Reference arrows show stack variables pointing to heap objects"
    - "Level selector switches between beginner/intermediate/advanced"
    - "Example tabs navigate within current level"
  artifacts:
    - path: "src/components/Concepts/ObjectsBasicsViz.tsx"
      provides: "Step-through visualization with types, examples, SharedViz integration"
      exports: ["ObjectsBasicsViz"]
    - path: "src/components/Concepts/ObjectsBasicsViz.module.css"
      provides: "Teal-accented styling mirroring ArraysBasicsViz"
      contains: "--js-viz-accent: #14b8a6"
  key_links:
    - from: "ObjectsBasicsViz.tsx"
      to: "SharedViz"
      via: "import CodePanel, StepProgress, StepControls"
      pattern: "import.*from.*SharedViz"
---

<objective>
Rewrite ObjectsBasicsViz as a step-through visualization mirroring ArraysBasicsViz patterns exactly.

Purpose: Replace the static tab-based implementation with interactive step-through experience showing object reference semantics via stack/heap memory model.
Output: Working component with types, beginner examples (reference copy, mutation through reference, multiple references), level/example navigation, and SharedViz integration.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-objectsbasicsviz/06-RESEARCH.md
@src/components/Concepts/ArraysBasicsViz.tsx
@src/components/Concepts/ArraysBasicsViz.module.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Define object-specific TypeScript interfaces</name>
  <files>src/components/Concepts/ObjectsBasicsViz.tsx</files>
  <action>
Replace the existing ObjectsBasicsViz.tsx content with new step-through implementation.

Define interfaces at top of file (adapt from ArraysBasicsViz):

```typescript
interface StackItem {
  name: string
  value: string
  isReference?: boolean
  refId?: string
  highlight?: 'new' | 'changed' | 'none'
}

interface ObjectProperty {
  key: string
  value: string | number | boolean
  isReference?: boolean
  refId?: string
  highlight?: 'new' | 'changed' | 'deleted' | 'none'
}

interface HeapObject {
  id: string
  type: 'object'
  properties: ObjectProperty[]
  label: string
  highlight?: 'mutated' | 'new' | 'none'
}

interface ObjectStep {
  id: number
  codeLine: number
  description: string
  phase: 'setup' | 'access' | 'reference' | 'mutate' | 'destructure' | 'spread' | 'result'
  stack: StackItem[]
  heap: HeapObject[]
  output: string[]
}

interface ObjectExample {
  id: string
  title: string
  code: string[]
  steps: ObjectStep[]
  insight: string
}

type Level = 'beginner' | 'intermediate' | 'advanced'
```

Add levelInfo constant matching ArraysBasicsViz colors.
  </action>
  <verify>TypeScript compiles without errors: `npm run build 2>&1 | grep -i error || echo "No errors"`</verify>
  <done>Interfaces defined, no type errors</done>
</task>

<task type="auto">
  <name>Task 2: Implement beginner examples data</name>
  <files>src/components/Concepts/ObjectsBasicsViz.tsx</files>
  <action>
Create `examples` Record with 3 beginner examples:

1. "Value vs Reference copy" - Show primitive copy (a=5, b=a) vs object reference copy (obj2=obj1). Steps: setup primitives, show independence, create object in heap, assign reference, mutate through one, show both affected.

2. "Mutation through reference" - Simple obj.name mutation showing both references see change. Similar to ArraysBasicsViz "Mutation through reference" example but with object properties.

3. "Multiple references" - data, ref1, ref2, ref3 all pointing to same object. Mutate through ref2, show all see change.

Each example needs:
- code: string[] of source lines
- steps: ObjectStep[] with proper stack/heap state at each step
- insight: summary string

Use "#1", "#2" etc for heap object labels.
Properties display as {key: "name", value: "Alice"} format.
Reference values show "-> #1" syntax.

Leave intermediate and advanced as empty arrays for now.
  </action>
  <verify>Examples data compiles, each example has at least 5 steps</verify>
  <done>Three beginner examples with complete step data</done>
</task>

<task type="auto">
  <name>Task 3: Implement component with SharedViz and heap object rendering</name>
  <files>src/components/Concepts/ObjectsBasicsViz.tsx</files>
  <action>
Implement the ObjectsBasicsViz component following ArraysBasicsViz structure exactly:

1. Import SharedViz components: `import { CodePanel, StepProgress, StepControls } from '@/components/SharedViz'`

2. State management:
```typescript
const [level, setLevel] = useState<Level>('beginner')
const [exampleIndex, setExampleIndex] = useState(0)
const [stepIndex, setStepIndex] = useState(0)
```

3. Computed values:
```typescript
const currentExamples = examples[level]
const currentExample = currentExamples[exampleIndex]
const currentStep = currentExample?.steps[stepIndex]
```

4. Handlers (reset stepIndex on level/example change):
```typescript
const handleLevelChange = (newLevel: Level) => {
  setLevel(newLevel)
  setExampleIndex(0)
  setStepIndex(0)
}
const handleExampleChange = (index: number) => {
  setExampleIndex(index)
  setStepIndex(0)
}
```

5. getSharedRefWarning function - check during 'mutate' phase if multiple stack items share same refId.

6. Render structure (following ArraysBasicsViz):
- Level selector buttons with levelInfo colors
- Example tabs
- mainGrid with CodePanel and memoryPanel
- Stack section showing StackItem[] with reference highlighting
- Heap section showing HeapObject[] as key-value property boxes
- Console output box
- StepProgress with description
- StepControls
- Insight box

7. Heap object rendering - display properties as vertical key: value list:
```tsx
<div className={styles.heapObject}>
  <div className={styles.objectLabel}>{obj.label}</div>
  <div className={styles.objectProperties}>
    {obj.properties.map(prop => (
      <div key={prop.key} className={styles.property}>
        <span className={styles.propKey}>{prop.key}:</span>
        <span className={styles.propValue}>
          {prop.isReference ? prop.value : JSON.stringify(prop.value)}
        </span>
      </div>
    ))}
  </div>
</div>
```

Add AnimatePresence and motion.div for animations matching ArraysBasicsViz.
  </action>
  <verify>Component renders without runtime errors: `npm run dev` and verify in browser at /concepts/objects-basics</verify>
  <done>Component renders beginner examples with step-through navigation</done>
</task>

<task type="auto">
  <name>Task 4: Create teal-accented CSS matching ArraysBasicsViz patterns</name>
  <files>src/components/Concepts/ObjectsBasicsViz.module.css</files>
  <action>
Replace existing CSS with ArraysBasicsViz-adapted styles:

1. Container with teal accent:
```css
.container {
  --js-viz-bg: #0d1117;
  --js-viz-border: rgba(255, 255, 255, 0.08);
  --js-viz-accent: #14b8a6;  /* Teal instead of orange */

  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}
```

2. Copy all styles from ArraysBasicsViz.module.css but replace:
- rgba(249, 115, 22, ...) with rgba(20, 184, 166, ...) for teal
- #f97316 with #14b8a6

3. Add object-specific styles:
```css
.objectProperties {
  display: flex;
  flex-direction: column;
  gap: 0.25rem;
}

.property {
  display: flex;
  gap: var(--space-sm);
  padding: 0.25rem 0;
  font-family: 'Fira Code', monospace;
  font-size: var(--text-sm);
}

.property.highlightNew {
  background: rgba(16, 185, 129, 0.12);
  border-radius: var(--radius-sm);
  padding: 0.25rem 0.5rem;
  margin: 0 -0.5rem;
}

.property.highlightChanged {
  background: rgba(20, 184, 166, 0.15);
  border-radius: var(--radius-sm);
  padding: 0.25rem 0.5rem;
  margin: 0 -0.5rem;
}

.property.highlightDeleted {
  text-decoration: line-through;
  opacity: 0.5;
  background: rgba(239, 68, 68, 0.1);
}

.propKey {
  color: var(--gray-500);
}

.propValue {
  color: var(--gray-300);
}
```

4. Include all ArraysBasicsViz structural styles:
- levelSelector, levelBtn, levelDot
- exampleTabs, exampleTab
- mainGrid, memoryPanel
- stackSection, heapSection, sectionHeader
- stackItems, stackItem, heapObjects, heapObject
- outputBox, insightBox
- warningBadge (for mutation warnings)
- Animations: pulse, fadeIn, warningPulse
- Mobile responsive breakpoints

5. Update all accent color references to teal throughout.
  </action>
  <verify>CSS compiles, component styled correctly with teal accents</verify>
  <done>Complete CSS with teal accent, object property display, and all ArraysBasicsViz structural patterns</done>
</task>

</tasks>

<verification>
1. Run `npm run build` - no TypeScript or build errors
2. Navigate to /concepts/objects-basics in browser
3. Verify level selector shows beginner/intermediate/advanced buttons
4. Verify beginner examples tab navigation works
5. Step through "Value vs Reference copy" - confirm:
   - Stack shows variables with "-> #1" reference notation
   - Heap shows object with key: value property display
   - Mutation step shows warning badge
   - Console output appears correctly
6. Verify teal accent color visible on active elements, heap objects
7. Verify step controls work (prev/next/reset)
8. Confirm progress indicator updates with step description
</verification>

<success_criteria>
- ObjectsBasicsViz renders with teal-accented step-through UI
- 3 beginner examples with complete step data
- Stack/heap memory model displays objects as key-value pairs
- SharedViz components integrated (CodePanel, StepProgress, StepControls)
- Level and example navigation resets step index
- Warning badge appears during mutation of shared references
</success_criteria>

<output>
After completion, create `.planning/phases/06-objectsbasicsviz/06-01-SUMMARY.md`
</output>
