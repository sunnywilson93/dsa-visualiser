---
phase: 19-async-await-queues
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Concepts/AsyncAwaitErrorsViz.tsx
  - src/components/Concepts/AsyncAwaitParallelViz.tsx
  - src/components/Concepts/index.ts
  - src/app/concepts/[conceptId]/ConceptPageClient.tsx
autonomous: true

must_haves:
  truths:
    - "User can see try/catch with async/await and error propagation path"
    - "User can see fork diagram showing error vs success path (red/green)"
    - "User can see sequential vs parallel async execution comparison"
    - "User can see total execution time difference between sequential and parallel"
  artifacts:
    - path: "src/components/Concepts/AsyncAwaitErrorsViz.tsx"
      provides: "Async/await error handling visualization"
      min_lines: 250
      exports: ["AsyncAwaitErrorsViz"]
    - path: "src/components/Concepts/AsyncAwaitParallelViz.tsx"
      provides: "Parallel async execution visualization"
      min_lines: 250
      exports: ["AsyncAwaitParallelViz"]
  key_links:
    - from: "src/app/concepts/[conceptId]/ConceptPageClient.tsx"
      to: "AsyncAwaitErrorsViz"
      via: "dynamic import"
      pattern: "async-await-error-handling.*AsyncAwaitErrorsViz"
    - from: "src/app/concepts/[conceptId]/ConceptPageClient.tsx"
      to: "AsyncAwaitParallelViz"
      via: "dynamic import"
      pattern: "async-await-parallel.*AsyncAwaitParallelViz"
---

<objective>
Create AsyncAwaitErrorsViz (try/catch with async/await) and AsyncAwaitParallelViz (Promise.all vs sequential).

Purpose: Users understand error handling in async code and the performance benefit of parallel execution.
Output: Two visualization components covering ASYNC-09 and ASYNC-10 requirements.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-async-await-queues/19-CONTEXT.md
@.planning/phases/19-async-await-queues/19-RESEARCH.md
@src/components/Concepts/ErrorFirstCallbacksViz.tsx
@src/components/Concepts/EventLoopViz.tsx
@src/components/SharedViz/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AsyncAwaitErrorsViz component</name>
  <files>src/components/Concepts/AsyncAwaitErrorsViz.tsx</files>
  <action>
Create AsyncAwaitErrorsViz.tsx using Phase 18's ErrorFirstCallbacksViz fork diagram pattern:

1. Structure:
   - 'use client' directive at top
   - Import useState, motion/AnimatePresence
   - Import AlertCircle, CheckCircle, GitBranch from lucide-react
   - Import SharedViz components

2. Step interface (reuse ErrorFirstCallbacksViz pattern):
   ```typescript
   interface Step {
     description: string
     highlightLines: number[]
     errorPath: { active: boolean; errorValue?: string; caught?: boolean }
     successPath: { active: boolean; value?: string }
     asyncChain: { name: string; state: 'pending' | 'success' | 'error' }[]
     output: string[]
     phase: 'calling' | 'try' | 'catch' | 'success' | 'error' | 'propagate'
   }
   ```

3. Examples by level:
   - Beginner: Basic try/catch with async/await, error caught locally
     ```javascript
     async function fetchData() {
       try {
         const data = await fetchThatFails();
         console.log('Success:', data);
       } catch (error) {
         console.log('Error:', error.message);
       }
     }
     ```
   - Intermediate: Error propagation through async chain (nested async calls)
   - Advanced: Re-throwing errors, finally block, unhandled promise rejection

4. Visual layout (match ErrorFirstCallbacksViz):
   - Left: Code panel with highlighted lines
   - Center: Fork diagram with error path (red) and success path (green)
   - Right: Async call chain showing each function's state
   - Bottom: Output console

5. Fork diagram styling:
   - Error path: red background (bg-red-500/10), red border, AlertCircle icon
   - Success path: green background (bg-emerald-500/10), green border, CheckCircle icon
   - Inactive paths dimmed (opacity 0.3)

6. Key insights:
   - try/catch with await catches both sync and async errors
   - Uncaught errors propagate up the async chain
   - Error bubbles to nearest catch block
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>AsyncAwaitErrorsViz.tsx exists with fork diagram showing error/success paths</done>
</task>

<task type="auto">
  <name>Task 2: Create AsyncAwaitParallelViz component</name>
  <files>src/components/Concepts/AsyncAwaitParallelViz.tsx</files>
  <action>
Create AsyncAwaitParallelViz.tsx showing sequential vs parallel async execution:

1. Structure:
   - 'use client' directive at top
   - Import useState, motion/AnimatePresence
   - Import Timer, Zap from lucide-react
   - Import SharedViz components

2. Step interface:
   ```typescript
   interface PromiseItem {
     id: string
     label: string
     state: 'pending' | 'fulfilled'
     startTime: number
     endTime?: number
   }

   interface Step {
     description: string
     highlightLines: number[]
     mode: 'sequential' | 'parallel'
     promises: PromiseItem[]
     totalTime?: number
     currentlyAwaiting?: string
     output: string[]
     phase: string
   }
   ```

3. Examples by level:
   - Beginner: Two fetches - sequential (slow) vs parallel (fast)
     ```javascript
     // Sequential (SLOW)
     const a = await fetch('/a'); // wait 1s
     const b = await fetch('/b'); // wait 1s
     // Total: 2s

     // Parallel (FAST)
     const [a, b] = await Promise.all([
       fetch('/a'), // starts immediately
       fetch('/b')  // starts immediately
     ]);
     // Total: 1s (concurrent)
     ```
   - Intermediate: Three or more concurrent operations
   - Advanced: Error handling in parallel (fail-fast vs allSettled)

4. Visual layout:
   - Split view: Sequential on left, Parallel on right
   - Timeline bars showing when each promise starts/ends
   - Total time indicator at bottom
   - "All started at once" indicator for parallel

5. Timeline visualization:
   - Horizontal bars for each promise
   - Green fill showing completion progress
   - Time markers (0s, 1s, 2s)
   - Total time comparison badge

6. Key insights:
   - Sequential awaits block each operation
   - Promise.all starts all at once, awaits all together
   - Parallel is faster when operations are independent
   - Promise.all fails fast (first rejection fails all)
  </action>
  <verify>npm run build passes with no TypeScript errors</verify>
  <done>AsyncAwaitParallelViz.tsx exists with sequential vs parallel comparison</done>
</task>

<task type="auto">
  <name>Task 3: Wire both components to routing</name>
  <files>src/components/Concepts/index.ts, src/app/concepts/[conceptId]/ConceptPageClient.tsx</files>
  <action>
1. In src/components/Concepts/index.ts:
   - Add exports:
     `export { AsyncAwaitErrorsViz } from './AsyncAwaitErrorsViz'`
     `export { AsyncAwaitParallelViz } from './AsyncAwaitParallelViz'`

2. In src/app/concepts/[conceptId]/ConceptPageClient.tsx:
   - Update 'async-await-error-handling' (currently AsyncPatternsViz) to:
     `'async-await-error-handling': dynamic(() => import('@/components/Concepts/AsyncAwaitErrorsViz').then(m => m.AsyncAwaitErrorsViz))`
   - Update 'async-await-parallel' (currently AsyncPatternsViz) to:
     `'async-await-parallel': dynamic(() => import('@/components/Concepts/AsyncAwaitParallelViz').then(m => m.AsyncAwaitParallelViz))`
  </action>
  <verify>npm run dev, navigate to both routes, components render without errors</verify>
  <done>Both routes render their respective components</done>
</task>

</tasks>

<verification>
1. `npm run build` passes
2. `npm run lint` produces no new warnings
3. /concepts/async-await-error-handling - shows fork diagram with error/success paths
4. /concepts/async-await-parallel - shows sequential vs parallel comparison
5. Step through all levels on both components
6. Verify timeline visualization in parallel component
</verification>

<success_criteria>
- AsyncAwaitErrorsViz.tsx exists with try/catch fork diagram
- AsyncAwaitParallelViz.tsx exists with sequential vs parallel comparison
- Error/success paths clearly visualized (red/green)
- Timeline shows execution time difference
- 3 difficulty levels on both components
- Mobile responsive layouts
</success_criteria>

<output>
After completion, create `.planning/phases/19-async-await-queues/19-03-SUMMARY.md`
</output>
