---
phase: 17-compatibility-verification
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/globals.css
autonomous: true

must_haves:
  truths:
    - "Tailwind v4 preflight does not alter heading font sizes -- h1-h6 retain browser default sizes"
    - "Tailwind v4 preflight border reset does not change visible borders on unmigrated components"
    - "Images and media elements display correctly (not forced to block display if inline was expected)"
    - "List elements retain their default markers where expected"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "Preflight surgical overrides in @layer base"
      contains: "Preflight overrides"
  key_links:
    - from: "src/styles/globals.css"
      to: "@layer base"
      via: "Preflight override rules"
      pattern: "Preflight"
---

<objective>
Add surgical preflight overrides to globals.css that prevent Tailwind v4's modern-normalize reset from altering unmigrated component styles. Keep preflight active for its benefits but neutralize specific rules that conflict.

Purpose: Tailwind v4 preflight sets `font-size: inherit` on headings, `display: block` on images, removes list markers, and sets `border: 0 solid` universally. These changes would alter the visual appearance of unmigrated components. Overrides restore browser defaults for these specific properties.

Output: Updated globals.css with preflight override rules in the existing @layer base block.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/styles/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add preflight surgical overrides to globals.css</name>
  <files>src/styles/globals.css</files>
  <action>
Read the existing globals.css. Find the `@layer base { :root {` block. Add preflight override rules AFTER the `:root {}` closing brace but still INSIDE the `@layer base {}` block.

Add these surgical overrides with a clear comment section:

```css
/* ===========================
   Preflight Overrides
   ===========================
   Tailwind v4 preflight (modern-normalize) resets certain browser defaults.
   These overrides restore defaults for unmigrated components.
   Permanent foundation -- part of design system baseline.
   =========================== */

/* Restore heading font sizes (preflight sets font-size: inherit) */
h1 { font-size: 2em; }
h2 { font-size: 1.5em; }
h3 { font-size: 1.17em; }
h4 { font-size: 1em; }
h5 { font-size: 0.83em; }
h6 { font-size: 0.67em; }
h1, h2, h3, h4, h5, h6 {
  font-weight: bold;
}

/* Restore default border-style (preflight sets *, *::before, *::after { border: 0 solid }) */
/* This prevents shorthand `border: 1px #color` from unexpectedly getting solid style */
*, *::before, *::after {
  border-style: none;
  border-width: 0;
}

/* Restore list markers (preflight removes them) */
ol, ul {
  list-style: revert;
}

/* Restore image display (preflight sets img, video, etc to display: block) */
img, svg, video, canvas, audio, iframe, embed, object {
  display: revert;
}
```

IMPORTANT NOTES:
- Place these rules inside `@layer base {}` so they can be overridden by component-level CSS Modules (which are unlayered and therefore higher specificity)
- The border reset (`border-style: none; border-width: 0`) matches browser defaults. Components that set borders via CSS Modules do so explicitly with `border: 1px solid var(--color)` which overrides this.
- Do NOT disable preflight entirely -- keep its modern-normalize benefits (box-sizing, margin resets, etc.)
- Check if any of these overrides already exist in the file to avoid duplication
  </action>
  <verify>Run `npm run build` to confirm globals.css still compiles without errors. The build should pass cleanly.</verify>
  <done>Preflight overrides are in @layer base of globals.css. Headings retain browser default sizes. Border style defaults to none. List markers are preserved. Image display is reverted.</done>
</task>

</tasks>

<verification>
1. `npm run build` passes with zero errors
2. globals.css contains preflight override section in @layer base
3. Overrides cover: heading sizes, border reset, list markers, image display
</verification>

<success_criteria>
Preflight overrides exist in globals.css @layer base. Tailwind v4's modern-normalize does not alter heading sizes, border behavior, list markers, or image display on unmigrated components.
</success_criteria>

<output>
After completion, create `.planning/phases/17-compatibility-verification/17-02-SUMMARY.md`
</output>
