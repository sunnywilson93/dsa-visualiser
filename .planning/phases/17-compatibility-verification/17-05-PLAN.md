---
phase: 17-compatibility-verification
plan: 05
type: execute
wave: 3
depends_on: ["17-03", "17-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "All var() references resolve correctly -- check:vars exits 0"
    - "Zero @keyframes in CSS Modules -- check:keyframes exits 0"
    - "npm run build passes with zero errors"
    - "npm run lint produces no new warnings"
    - "Playwright visual regression tests pass with zero pixel differences at all 3 viewports"
  artifacts: []
  key_links: []
---

<objective>
Run the complete verification suite and confirm all Phase 17 success criteria are met. This is the final gate before the v2.0 milestone is complete.

Purpose: Comprehensive final check that all four VER requirements are satisfied: var() resolution (VER-01), preflight overrides (VER-02), build/lint clean (VER-03), and visual parity (VER-04).

Output: All checks pass. Phase 17 verified complete.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-compatibility-verification/17-03-SUMMARY.md
@.planning/phases/17-compatibility-verification/17-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run complete verification suite</name>
  <files></files>
  <action>
Run ALL verification commands in sequence:

1. `npm run check:vars` -- VER-01: All var() references resolve
2. `npm run check:keyframes` -- Enforcement: No @keyframes in CSS Modules
3. `npm run tokens:audit` -- Informational: Token usage report
4. `npm run build` -- VER-03: Build passes
5. `npm run lint` -- VER-03: Lint clean
6. `npm run test:run` -- Existing tests still pass
7. `npm run test:visual` -- VER-04: Visual parity at 360px, 768px, 1440px

If ANY check fails:
- Diagnose the root cause
- Fix it (update globals.css, CSS Module files, or test baselines as needed)
- Re-run ALL checks from the beginning

All 7 checks must pass in a single clean run.
  </action>
  <verify>All 7 commands exit 0 in a single clean run.</verify>
  <done>Complete verification suite passes. VER-01 through VER-04 all satisfied.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Phase 17 Compatibility Verification complete:
- Static analysis scripts (check:vars, check:keyframes, tokens:audit) confirm all CSS custom properties resolve
- Preflight surgical overrides prevent Tailwind v4 defaults from altering component styles
- Build and lint pass cleanly
- Playwright visual regression tests confirm zero pixel differences across all pages at 360px, 768px, and 1440px
  </what-built>
  <how-to-verify>
1. Run `npm run dev` and visually spot-check a few pages:
   - Home page (/)
   - A JS concept page (/concepts/variables or /concepts/closures)
   - A DSA pattern page (/concepts/dsa/patterns/two-pointers)
   - Resize browser to mobile width (~360px) and check layout
2. Verify no visual changes from how pages looked before Phase 16/17
3. Optionally run `npm run test:visual` to see the Playwright report
  </how-to-verify>
  <resume-signal>Type "approved" if everything looks correct, or describe any visual issues</resume-signal>
</task>

</tasks>

<verification>
1. All 7 verification commands pass in clean run
2. Human confirms visual parity with pre-migration state
</verification>

<success_criteria>
Phase 17 complete. All VER requirements satisfied. v2.0 Design System Foundation milestone ready to ship.
</success_criteria>

<output>
After completion, create `.planning/phases/17-compatibility-verification/17-05-SUMMARY.md`
</output>
