---
phase: 16-config-token-migration
plan: 04
type: execute
wave: 4
depends_on: ["16-03"]
files_modified:
  - src/styles/globals.css
  - "*.module.css (84+ files referencing --font-normal/medium/semibold/bold)"
autonomous: true

must_haves:
  truths:
    - "Font families are in @theme with --font-* namespace"
    - "Font sizes are in @theme with --text-* namespace"
    - "Font weights are in @theme with --font-weight-* namespace (renamed from --font-normal etc.)"
    - "Line heights are in @theme with --leading-* namespace"
    - "All var() references to old --font-normal/medium/semibold/bold updated to --font-weight-*"
    - "App builds successfully"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "Typography tokens in @theme (4 namespaces)"
      contains: "--font-weight-normal"
  key_links:
    - from: "*.module.css var(--font-weight-semibold)"
      to: "@theme --font-weight-semibold"
      via: "CSS custom property resolution"
      pattern: "var\\(--font-weight-"
---

<objective>
Typography Token Migration -- Move font families, font sizes, font weights, and line heights from :root into @theme with correct Tailwind v4 namespaces. Rename --font-normal/medium/semibold/bold to --font-weight-* to avoid namespace collision.

Purpose: Typography tokens require careful namespace handling. --font-* is for font families, --text-* is for font sizes, --font-weight-* is for weights, --leading-* is for line heights. Existing --font-normal (weight=400) would collide with --font-* (family namespace).
Output: All typography tokens in @theme with correct namespaces, all var() references updated.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/16-config-token-migration/16-RESEARCH.md
@.planning/phases/16-config-token-migration/16-03-SUMMARY.md
@src/styles/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate typography tokens to @theme</name>
  <files>src/styles/globals.css</files>
  <action>
    In the `@theme` block (after the spacing section), add the typography section:

    ```css
    /* === Typography === */

    /* Font families */
    --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    --font-mono: 'JetBrains Mono', 'Fira Code', 'SF Mono', Monaco, 'Cascadia Code', monospace;

    /* Font sizes (--text-* namespace = font-size utilities) */
    --text-2xs: 0.625rem;
    --text-xs: 0.7rem;
    --text-sm: 0.75rem;
    --text-base: 0.85rem;
    --text-md: 1rem;
    --text-lg: 1.125rem;
    --text-xl: 1.25rem;
    --text-2xl: 1.5rem;
    --text-3xl: 2rem;

    /* Font weights (RENAMED from --font-* to --font-weight-*) */
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    /* Line heights */
    --leading-none: 1;
    --leading-tight: 1.25;
    --leading-snug: 1.4;
    --leading-normal: 1.5;
    --leading-relaxed: 1.6;
    ```

    Remove ALL typography tokens from `:root` in `@layer base`:
    - Remove --font-mono, --font-sans (font families)
    - Remove --text-2xs through --text-3xl (font sizes -- NOTE: text COLOR tokens were already moved in Plan 02)
    - Remove --font-normal, --font-medium, --font-semibold, --font-bold (font weights)
    - Remove --leading-none through --leading-relaxed (line heights)

    NOTE: The --text-* font size tokens (--text-2xs, --text-xs, etc.) do NOT conflict with the --color-text-* color tokens from Plan 02. In @theme, --text-* generates font-size utilities (text-sm, text-lg). The color tokens are --color-text-primary which generates color utilities (text-text-primary for color). These are separate namespaces.
  </action>
  <verify>
    - `grep "\-\-font-sans" src/styles/globals.css` appears in @theme (not :root)
    - `grep "\-\-font-weight-normal" src/styles/globals.css` exists
    - `grep "\-\-text-2xs" src/styles/globals.css` appears in @theme
    - `grep "\-\-leading-tight" src/styles/globals.css` appears in @theme
    - No typography tokens remain in the :root block
  </verify>
  <done>All typography tokens in @theme with correct namespaces.</done>
</task>

<task type="auto">
  <name>Task 2: Update font-weight var() references across CSS files</name>
  <files>All *.module.css files and src/styles/globals.css</files>
  <action>
    Search and replace ALL var() references for renamed font weight tokens:

    **Font weight renames (506 occurrences across 84 files):**
    - `var(--font-normal)` -> `var(--font-weight-normal)`
    - `var(--font-medium)` -> `var(--font-weight-medium)`
    - `var(--font-semibold)` -> `var(--font-weight-semibold)`
    - `var(--font-bold)` -> `var(--font-weight-bold)`

    IMPORTANT: Do NOT rename `var(--font-sans)` or `var(--font-mono)` -- these are font FAMILY tokens and their names are already correct for the --font-* namespace.

    Process order: Replace `--font-semibold` before `--font-semi` (use exact match patterns to avoid partial replacement). The safest pattern is to match `var(--font-normal)`, `var(--font-medium)`, `var(--font-semibold)`, `var(--font-bold)` exactly.

    Also update font SIZE token references if any were using old names (--text-2xs etc. stay the same name, just moved from :root to @theme, so no rename needed for font sizes).

    Also update line height references (--leading-* stay the same name, just moved, so no rename needed).

    Check TSX/TS files: `grep -rn "\-\-font-normal\|\-\-font-medium\|\-\-font-semibold\|\-\-font-bold" src/ --include="*.tsx" --include="*.ts"`
  </action>
  <verify>
    - `npm run build` passes with zero errors
    - `grep -r "var(--font-normal)" src/ --include="*.css"` returns 0 matches
    - `grep -r "var(--font-medium)" src/ --include="*.css"` returns 0 matches (careful: --font-mono should NOT be renamed)
    - `grep -r "var(--font-semibold)" src/ --include="*.css"` returns 0 matches
    - `grep -r "var(--font-bold)" src/ --include="*.css"` returns 0 matches
    - `grep -r "var(--font-weight-semibold)" src/ --include="*.css"` returns matches
    - `grep -r "var(--font-sans)" src/ --include="*.css"` still returns matches (NOT renamed)
    - `npm run lint` passes
  </verify>
  <done>
    - All font-weight var() references updated to --font-weight-* namespace
    - Font family references (--font-sans, --font-mono) left unchanged
    - Font size references (--text-*) left unchanged (same names in @theme)
    - Line height references (--leading-*) left unchanged (same names in @theme)
    - Build passes
  </done>
</task>

</tasks>

<verification>
- `npm run build` passes
- `grep -r "var(--font-normal\b" src/ --include="*.css"` returns 0 (all renamed to --font-weight-normal)
- `grep -r "var(--font-bold\b" src/ --include="*.css"` returns 0 (all renamed to --font-weight-bold)
- `grep -r "var(--font-sans)" src/ --include="*.css"` still returns matches (family tokens unchanged)
- All 4 typography namespaces present in @theme: --font-*, --text-*, --font-weight-*, --leading-*
</verification>

<success_criteria>
All typography tokens in @theme with correct Tailwind v4 namespaces. Font weights renamed from --font-* to --font-weight-* across all 84+ files (506+ occurrences). Font families, sizes, and line heights moved without renaming. Build passes with identical visual output.
</success_criteria>

<output>
After completion, create `.planning/phases/16-config-token-migration/16-04-SUMMARY.md`
</output>
