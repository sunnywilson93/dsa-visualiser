---
phase: 16-config-token-migration
plan: 03
type: execute
wave: 3
depends_on: ["16-02"]
files_modified:
  - src/styles/globals.css
  - "*.module.css (files referencing --space-* tokens)"
autonomous: true

must_haves:
  truths:
    - "@theme defines --spacing: 4px base multiplier"
    - "All named spacing tokens (xs through 6xl) are in @theme with --spacing-* namespace"
    - "Numeric spacing tokens (--space-0 through --space-2-5) are removed from :root"
    - "All var() references updated from --space-* to --spacing-*"
    - "App builds successfully"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "Spacing tokens in @theme --spacing-* namespace"
      contains: "--spacing: 4px"
  key_links:
    - from: "*.module.css var(--spacing-sm)"
      to: "@theme --spacing-sm"
      via: "CSS custom property resolution"
      pattern: "var\\(--spacing-"
---

<objective>
Spacing Token Migration -- Move named spacing tokens from :root into @theme with --spacing-* namespace and set the 4px base multiplier. Remove numeric spacing tokens.

Purpose: Spacing tokens get --spacing-* namespace which generates Tailwind spacing utilities (p-xs, m-sm, gap-lg, etc.) and the base multiplier enables numeric utilities (p-1 = 4px, p-2 = 8px).
Output: All named spacing tokens in @theme, numeric tokens removed, all var() references updated.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/16-config-token-migration/16-RESEARCH.md
@.planning/phases/16-config-token-migration/16-02-SUMMARY.md
@src/styles/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate spacing tokens to @theme</name>
  <files>src/styles/globals.css</files>
  <action>
    In the `@theme` block (after the color section), add the spacing section:

    ```css
    /* === Spacing === */
    --spacing: 4px;
    --spacing-xs: 4px;
    --spacing-sm: 8px;
    --spacing-md: 12px;
    --spacing-lg: 16px;
    --spacing-xl: 24px;
    --spacing-2xl: 32px;
    --spacing-3xl: 40px;
    --spacing-4xl: 48px;
    --spacing-5xl: 64px;
    --spacing-6xl: 80px;
    ```

    Remove ALL spacing tokens from `:root` in `@layer base`:
    - Remove `--space-0: 0px` through `--space-6xl: 80px` (all 19 spacing tokens)
    - This includes numeric tokens: --space-0, --space-px, --space-0-5, --space-1, --space-1-5, --space-2, --space-2-5
    - And named tokens: --space-xs through --space-6xl

    Do NOT add numeric spacing tokens to @theme. The `--spacing: 4px` multiplier handles p-1 = 4px, p-2 = 8px, etc. automatically. Only named tokens (xs, sm, md, lg, xl, 2xl-6xl) go in @theme.
  </action>
  <verify>
    - `grep "\-\-spacing:" src/styles/globals.css` shows base multiplier in @theme
    - `grep "\-\-space-" src/styles/globals.css` returns 0 matches (all removed from :root)
    - `grep "\-\-spacing-xs" src/styles/globals.css` shows named tokens in @theme
  </verify>
  <done>Spacing tokens in @theme with 4px base multiplier. Numeric tokens removed.</done>
</task>

<task type="auto">
  <name>Task 2: Update spacing var() references across CSS files</name>
  <files>All *.module.css files and src/styles/globals.css</files>
  <action>
    Search and replace ALL var() references from old spacing names to new:

    **Named tokens (rename --space-* to --spacing-*):**
    - `var(--space-xs)` -> `var(--spacing-xs)`
    - `var(--space-sm)` -> `var(--spacing-sm)`
    - `var(--space-md)` -> `var(--spacing-md)`
    - `var(--space-lg)` -> `var(--spacing-lg)`
    - `var(--space-xl)` -> `var(--spacing-xl)`
    - `var(--space-2xl)` -> `var(--spacing-2xl)`
    - `var(--space-3xl)` -> `var(--spacing-3xl)`
    - `var(--space-4xl)` -> `var(--spacing-4xl)`
    - `var(--space-5xl)` -> `var(--spacing-5xl)`
    - `var(--space-6xl)` -> `var(--spacing-6xl)`

    **Numeric tokens (replace with literal values):**
    - `var(--space-0)` -> `0px`
    - `var(--space-px)` -> `1px`
    - `var(--space-0-5)` -> `2px`
    - `var(--space-1)` -> `3px`
    - `var(--space-1-5)` -> `5px`
    - `var(--space-2)` -> `6px`
    - `var(--space-2-5)` -> `10px`

    First grep for all occurrences: `grep -rn "var(--space-" src/ --include="*.css"` to get the full list.

    Also check TSX files: `grep -rn "\-\-space-" src/ --include="*.tsx" --include="*.ts"`
  </action>
  <verify>
    - `npm run build` passes with zero errors
    - `grep -r "var(--space-" src/ --include="*.css"` returns 0 matches
    - `grep -r "var(--spacing-sm)" src/ --include="*.css"` returns matches
    - `npm run lint` passes
  </verify>
  <done>
    - All spacing var() references updated to --spacing-* or literal values
    - No orphaned --space-* references remain
    - Build passes
  </done>
</task>

</tasks>

<verification>
- `npm run build` passes
- `grep -r "var(--space-" src/` returns 0 matches (all renamed/inlined)
- `grep "\-\-spacing: 4px" src/styles/globals.css` returns 1 match (base multiplier)
- Named spacing tokens (xs-6xl) all in @theme block
</verification>

<success_criteria>
All named spacing tokens in @theme with --spacing-* namespace. Base 4px multiplier set. Numeric tokens removed and references inlined. All var() references updated. Build passes with identical visual output.
</success_criteria>

<output>
After completion, create `.planning/phases/16-config-token-migration/16-03-SUMMARY.md`
</output>
