---
phase: 16-config-token-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/globals.css
  - postcss.config.js
  - tailwind.config.js
  - package.json
  - package-lock.json
autonomous: true

must_haves:
  truths:
    - "`@import 'tailwindcss'` is the sole Tailwind entry point in globals.css"
    - "No `@tailwind` directives exist anywhere in the project"
    - "tailwind.config.js does not exist in the project root"
    - "autoprefixer is not in postcss.config.js or package.json dependencies"
    - "clsx is installed and in package.json dependencies"
    - "App builds successfully with `npm run build`"
    - "App renders identically to pre-migration state"
  artifacts:
    - path: "src/styles/globals.css"
      provides: "@import 'tailwindcss' directive and empty @theme block"
      contains: "@import \"tailwindcss\""
    - path: "postcss.config.js"
      provides: "Simplified PostCSS config with only @tailwindcss/postcss"
      contains: "@tailwindcss/postcss"
  key_links:
    - from: "src/styles/globals.css"
      to: "@tailwindcss/postcss"
      via: "@import directive processed by PostCSS"
      pattern: "@import \"tailwindcss\""
---

<objective>
Config Teardown -- Delete the legacy Tailwind JS config, replace @tailwind directives with @import, remove autoprefixer, install clsx, and establish an empty @theme block.

Purpose: Create a clean break from Tailwind v3-style configuration so subsequent plans can add token groups to @theme without legacy artifacts interfering.
Output: Buildable app with CSS-first Tailwind v4 configuration. All existing styles preserved -- :root tokens and @layer blocks remain untouched.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-config-token-migration/16-RESEARCH.md
@.planning/phases/16-config-token-migration/16-CONTEXT.md
@src/styles/globals.css
@tailwind.config.js
@postcss.config.js
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace directives, delete config, update PostCSS</name>
  <files>src/styles/globals.css, postcss.config.js, tailwind.config.js, package.json</files>
  <action>
    1. In `src/styles/globals.css`:
       - Remove the three lines `@tailwind base;`, `@tailwind components;`, `@tailwind utilities;`
       - Add `@import "tailwindcss";` as the very first line
       - Add an empty `@theme { }` block immediately after the @import (this is where subsequent plans will add tokens)
       - Keep ALL existing `@layer base`, `@layer components`, `@layer utilities` blocks and their contents exactly as they are

    2. Delete `tailwind.config.js` entirely. The @theme block replaces it.

    3. Update `postcss.config.js` to remove autoprefixer:
       ```js
       module.exports = {
         plugins: {
           '@tailwindcss/postcss': {},
         },
       }
       ```

    4. Run: `npm uninstall autoprefixer`
    5. Run: `npm install clsx`
    6. Verify `package.json` no longer lists autoprefixer and does list clsx

    IMPORTANT: Do NOT move any :root tokens into @theme yet. Do NOT rename any tokens. This plan only changes the config plumbing. All existing CSS custom properties in :root must remain exactly where they are.

    WHY empty @theme: Subsequent plans (02-06) will populate @theme with token groups. Establishing it now means the build system is already configured for CSS-first mode.
  </action>
  <verify>
    - `npm run build` completes with zero errors
    - `ls tailwind.config.js` returns "No such file"
    - `grep -c "autoprefixer" postcss.config.js` returns 0
    - `grep -c "@tailwind" src/styles/globals.css` returns 0
    - `grep -c "@import" src/styles/globals.css` returns at least 1
    - `grep "clsx" package.json` shows clsx in dependencies
    - `npm run lint` produces no new errors
  </verify>
  <done>
    - @import "tailwindcss" is the first line of globals.css
    - Empty @theme block exists after @import
    - tailwind.config.js is deleted
    - autoprefixer removed from PostCSS config and package.json
    - clsx installed in dependencies
    - Build passes, lint passes
  </done>
</task>

</tasks>

<verification>
- `npm run build` passes with zero errors
- No `@tailwind` directives exist: `grep -r "@tailwind" src/` returns nothing
- No JS config: `test ! -f tailwind.config.js && echo "DELETED"`
- PostCSS clean: `grep -c "autoprefixer" postcss.config.js` returns 0
- clsx available: `node -e "require('clsx')"` exits 0
</verification>

<success_criteria>
The app builds and renders identically to its pre-migration state. The only changes are: (1) @import replaces @tailwind directives, (2) tailwind.config.js is deleted, (3) autoprefixer is removed, (4) clsx is installed, (5) empty @theme block exists.
</success_criteria>

<output>
After completion, create `.planning/phases/16-config-token-migration/16-01-SUMMARY.md`
</output>
