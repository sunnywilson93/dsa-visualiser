---
phase: 09-hashmapviz
plan: 03
type: execute
wave: 3
depends_on: ["09-02"]
files_modified:
  - src/components/DSAPatterns/HashMapViz/HashMapViz.tsx
autonomous: true

must_haves:
  truths:
    - "User can select advanced difficulty and see Group Anagrams example"
    - "Sorted key technique is visualized (word -> sort -> use as hash key)"
    - "Multiple words grouping into same bucket entry shown"
  artifacts:
    - path: "src/components/DSAPatterns/HashMapViz/HashMapViz.tsx"
      provides: "Advanced examples added to examples record"
      contains: "group-anagrams"
  key_links:
    - from: "examples['frequency-counter']['advanced']"
      to: "HashMapViz render"
      via: "currentExample selection"
      pattern: "group-anagrams"
---

<objective>
Add advanced examples to HashMapViz for the Group Anagrams problem.

Purpose: Demonstrates hash map with derived keys (sorted string as key) and array values for grouping.

Output:
- Group Anagrams example in frequency-counter variant at advanced level
- Steps showing: sort word to create key, group words by sorted key
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/09-hashmapviz/09-CONTEXT.md
@.planning/phases/09-hashmapviz/09-01-SUMMARY.md
@.planning/phases/09-hashmapviz/09-02-SUMMARY.md
@src/components/DSAPatterns/HashMapViz/HashMapViz.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Group Anagrams advanced example</name>
  <files>
    src/components/DSAPatterns/HashMapViz/HashMapViz.tsx
  </files>
  <action>
Add advanced example to the frequency-counter variant in the examples record.

**Group Anagrams Example:**
- Variant: frequency-counter
- Level: advanced
- Input: ["eat", "tea", "tan", "ate", "nat", "bat"]
- Output: [["eat", "tea", "ate"], ["tan", "nat"], ["bat"]]
- Algorithm: Sort each word to create key, store words in array at that key

**Code to display:**
```javascript
function groupAnagrams(strs) {
  const groups = {}

  for (const word of strs) {
    const key = [...word].sort().join('')
    if (!groups[key]) groups[key] = []
    groups[key].push(word)
  }

  return Object.values(groups)
}
```

**Steps (15-20 total):**
1. Initial: Show input array of words, empty bucket grid
2-4. Process "eat":
   - Sort "eat" -> "aet" (show transformation)
   - Calculate hash of "aet"
   - Create new entry: "aet" -> ["eat"]
5-7. Process "tea":
   - Sort "tea" -> "aet"
   - Hash matches bucket for "aet"
   - Push to existing array: "aet" -> ["eat", "tea"]
8-10. Process "tan":
   - Sort "tan" -> "ant"
   - New key, new entry: "ant" -> ["tan"]
11-13. Process "ate":
   - Sort "ate" -> "aet"
   - Push to existing: "aet" -> ["eat", "tea", "ate"]
14-16. Process "nat":
   - Sort "nat" -> "ant"
   - Push to existing: "ant" -> ["tan", "nat"]
17-19. Process "bat":
   - Sort "bat" -> "abt"
   - New entry: "abt" -> ["bat"]
20. Return Object.values() - show final grouped output

**Visual adaptations for array values:**
- Entry value display needs to handle arrays: show ["eat", "tea", "ate"] or truncated if long
- Animation when pushing to array (entry expands slightly?)
- Key transformation display: "eat" -> sort -> "aet" (similar to hash calculation but different operation)

**Key transformation display (new visual element):**
Instead of char code hash calculation, show:
```
"eat" -> sort -> "aet" -> hash -> bucket[N]
```

This is a variation of the hash calculation display. The "key derivation" step shows the sort operation, then the hash.

**Bucket entries store arrays:**
Update BucketEntry type or use flexible value type that can be string | number | string[] for this example. The value display should handle arrays gracefully.
  </action>
  <verify>
Run `npm run dev`
Navigate to /concepts/dsa/patterns/hash-map
1. Click "Frequency Counter" variant tab
2. Click "Advanced" level tab
3. "Group Anagrams" example should appear
4. Step through all steps:
   - Each word gets sorted to create key
   - Key transformation shows "eat" -> "aet"
   - Bucket entries show array values growing
   - Final output shows 3 groups
5. Array value display works (doesn't overflow bucket)
  </verify>
  <done>
Group Anagrams advanced example complete with:
- Full step data (15-20 steps)
- Key derivation (sort) visualization
- Array value handling in bucket entries
- Push-to-array animation
- Final grouped output display
  </done>
</task>

<task type="auto">
  <name>Task 2: Polish and verify all difficulty levels</name>
  <files>
    src/components/DSAPatterns/HashMapViz/HashMapViz.tsx
    src/components/DSAPatterns/HashMapViz/HashMapViz.module.css
  </files>
  <action>
Final polish pass to ensure all difficulty levels work together:

1. **Level availability:**
   - Beginner: 2 examples (Two Sum, basic frequency)
   - Intermediate: 1 example (Valid Anagram)
   - Advanced: 1 example (Group Anagrams)
   - Empty levels should show graceful empty state or disable the level button

2. **Variant coverage:**
   - complement-lookup: beginner Two Sum (maybe intermediate if added in 09-02)
   - frequency-counter: all levels have examples
   - index-storage: may be empty - show appropriate message

3. **CSS adjustments if needed:**
   - Array value display in entries (may need truncation or expand on hover)
   - Key transformation display styling (word -> sort -> key)
   - Any mobile responsiveness issues

4. **Insight text:**
   - Each example should have meaningful insight text
   - Two Sum: "Hash map gives O(1) lookup - avoiding O(n^2) nested loops"
   - Frequency Counter: "Single pass counting enables O(n) anagram validation"
   - Valid Anagram: "Increment then decrement pattern detects character frequency match"
   - Group Anagrams: "Sorted string as key groups anagrams automatically - O(n * k log k)"

5. **Empty variant handling:**
   - If index-storage variant has no examples, show a message like "Examples coming soon" or disable the tab
   - Match how TwoPointersViz handles missing examples (if any)
  </action>
  <verify>
Full end-to-end test:

1. Navigate to /concepts/dsa/patterns/hash-map
2. Test all variant tabs:
   - Complement Lookup: has beginner (Two Sum)
   - Frequency Counter: has all 3 levels
   - Index Storage: shows empty state or disabled
3. Test all level tabs across variants
4. Step through at least one example from each level
5. Verify insight text displays
6. Test mobile view (resize browser)
7. `npm run build` passes
8. `npm run lint` passes
  </verify>
  <done>
HashMapViz phase complete with:
- 4-5 examples across 3 difficulty levels
- All variant tabs functional
- Empty states handled gracefully
- Insight text for each example
- Mobile responsive
- Build and lint pass
  </done>
</task>

</tasks>

<verification>
After completion, full phase verification:

1. **All 6 success criteria met:**
   - [x] User can navigate to /concepts/dsa/patterns/hash-map and see HashMapViz
   - [x] User can switch between beginner, intermediate, and advanced
   - [x] Key-value pairs display within bucket structure
   - [x] Bucket visualization shows hash function converting key to bucket
   - [x] Frequency counter shows count incrementing with visual feedback
   - [x] Lookup/insert operations step through with hash -> bucket -> entry flow

2. **Examples inventory:**
   - Beginner: Two Sum (complement-lookup), Basic Frequency (frequency-counter)
   - Intermediate: Valid Anagram (frequency-counter)
   - Advanced: Group Anagrams (frequency-counter)

3. **Visual elements working:**
   - Bucket grid with 8 buckets
   - Hash calculation inline display
   - Entry animations (appear, update)
   - Decision panel
   - Input array highlight
   - Output display

4. **Build passes:** `npm run build` completes without errors
</verification>

<success_criteria>
- Group Anagrams example implemented at advanced level
- Array value handling works in bucket entries
- Key derivation (sort) visualization works
- All difficulty levels accessible and functional
- Phase 9 complete per ROADMAP success criteria
</success_criteria>

<output>
After completion, create `.planning/phases/09-hashmapviz/09-03-SUMMARY.md`
</output>
