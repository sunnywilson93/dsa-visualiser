---
phase: 09-hashmapviz
plan: 02
type: execute
wave: 2
depends_on: ["09-01"]
files_modified:
  - src/components/DSAPatterns/HashMapViz/HashMapViz.tsx
autonomous: true

must_haves:
  truths:
    - "User can select intermediate difficulty and see Valid Anagram example"
    - "Frequency counter shows character counts building up for both strings"
    - "Final comparison step shows match/mismatch between frequency maps"
  artifacts:
    - path: "src/components/DSAPatterns/HashMapViz/HashMapViz.tsx"
      provides: "Intermediate examples added to examples record"
      contains: "valid-anagram"
  key_links:
    - from: "examples['frequency-counter']['intermediate']"
      to: "HashMapViz render"
      via: "currentExample selection"
      pattern: "valid-anagram"
---

<objective>
Add intermediate examples to HashMapViz for the Valid Anagram problem.

Purpose: Demonstrates hash map frequency counting with two strings, showing comparison logic.

Output:
- Valid Anagram example in frequency-counter variant at intermediate level
- Steps showing: count chars from string 1, decrement for string 2, check all zeros
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/09-hashmapviz/09-CONTEXT.md
@.planning/phases/09-hashmapviz/09-01-SUMMARY.md
@src/components/DSAPatterns/HashMapViz/HashMapViz.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Valid Anagram intermediate example</name>
  <files>
    src/components/DSAPatterns/HashMapViz/HashMapViz.tsx
  </files>
  <action>
Add intermediate example to the frequency-counter variant in the examples record.

**Valid Anagram Example:**
- Variant: frequency-counter
- Level: intermediate
- Input: s = "anagram", t = "nagaram"
- Algorithm: Count chars in s (increment), then process t (decrement), check all zeros

**Code to display:**
```javascript
function isAnagram(s, t) {
  if (s.length !== t.length) return false

  const charCount = {}

  for (const char of s) {
    charCount[char] = (charCount[char] || 0) + 1
  }

  for (const char of t) {
    if (!charCount[char]) return false
    charCount[char]--
  }

  return true
}
```

**Steps (15-20 total):**
1. Initial: Show both strings, empty bucket grid
2. Check lengths match (7 === 7)
3-9. First loop - count each char of "anagram":
   - For each char: read-key -> calculate-hash -> access-bucket -> insert/increment
   - Show hash calculation: 'a' -> 97 % 8 -> bucket[1]
   - For repeated chars (a appears 3 times), show increment animation
10-16. Second loop - decrement for each char of "nagaram":
   - For each char: read-key -> calculate-hash -> access-bucket -> decrement
   - Decision: "Is charCount['n'] truthy?" -> Yes/No -> Decrement or fail
   - Value decrement animation (similar to increment but different color?)
17. Final check: All values are 0
18. Return true - strings are anagrams

**Visual highlights:**
- During first loop: show which string character is being processed (highlight in input display)
- Entry glow when incrementing
- Different visual for decrement (maybe amber color instead of green)
- Final step shows all entries at 0

**Ensure:**
- Hash calculations use char codes (e.g., 'a'.charCodeAt(0) = 97)
- Bucket grid shows entries appearing and values changing
- Decision panel shows the key logic ("Is char in map?", "Is count > 0?")
  </action>
  <verify>
Run `npm run dev`
Navigate to /concepts/dsa/patterns/hash-map
1. Click "Frequency Counter" variant tab
2. Click "Intermediate" level tab
3. "Valid Anagram" example should appear
4. Step through all steps:
   - First loop builds character counts (a:3, n:1, g:1, r:1, m:1)
   - Second loop decrements all to 0
   - Returns true
5. Hash calculations appear at correct phases
6. Value animations work for both increment and decrement
  </verify>
  <done>
Valid Anagram intermediate example complete with:
- Full step data (15-20 steps)
- Both loops visualized (count then decrement)
- Hash calculations for character keys
- Decision logic displayed
- Value animations for increment/decrement
  </done>
</task>

<task type="auto">
  <name>Task 2: Add complement-lookup intermediate example (optional stretch)</name>
  <files>
    src/components/DSAPatterns/HashMapViz/HashMapViz.tsx
  </files>
  <action>
If time permits and context budget allows, add a second intermediate example to complement-lookup variant.

**Contains Duplicate II Example:**
- Input: nums = [1, 2, 3, 1], k = 3
- Algorithm: Store value -> index, check if same value exists within k distance

This is OPTIONAL. If context is getting tight (approaching 40-50%), skip this task and note it in summary for potential future addition.

If implementing:
- Variant: complement-lookup (or could be index-storage)
- Level: intermediate
- Steps show: storing indices, checking distance constraint
- Decision: "Is abs(i - map[num]) <= k?"
  </action>
  <verify>
If implemented:
- Navigate to complement-lookup or index-storage variant
- Select intermediate level
- Contains Duplicate II example appears
- Step through shows index storage and distance checking

If skipped:
- Note in summary that intermediate level for complement-lookup/index-storage variants is empty (deferred)
  </verify>
  <done>
Either:
- Contains Duplicate II added as second intermediate example
OR
- Noted as deferred, Valid Anagram is the sole intermediate example
  </done>
</task>

</tasks>

<verification>
After completion:

1. **Valid Anagram works:**
   - Navigate to /concepts/dsa/patterns/hash-map
   - Select Frequency Counter variant
   - Select Intermediate level
   - Valid Anagram example loads
   - Step through entire example - all phases work
   - Hash calculations correct (char codes)
   - Increment/decrement animations visible

2. **Build passes:** `npm run build` completes without errors

3. **Level switching:** Beginner -> Intermediate -> Beginner works smoothly
</verification>

<success_criteria>
- Valid Anagram example implemented at intermediate level
- Character frequency counting visualized correctly
- Decrement phase shows values going to 0
- Hash calculations show char code formula
- All animations work (entry appear, value change)
</success_criteria>

<output>
After completion, create `.planning/phases/09-hashmapviz/09-02-SUMMARY.md`
</output>
