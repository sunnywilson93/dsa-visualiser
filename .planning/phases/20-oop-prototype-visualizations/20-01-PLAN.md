---
phase: 20-oop-prototype-visualizations
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Concepts/PrototypeChainBasicsViz.tsx
  - src/components/Concepts/PropertyLookupViz.tsx
  - src/components/Concepts/index.ts
  - src/app/concepts/[conceptId]/ConceptPageClient.tsx
autonomous: true

must_haves:
  truths:
    - "User can step through prototype chain traversal from object to null"
    - "User can see each object node with its properties and __proto__ reference"
    - "User can step through property lookup walking up the chain"
    - "User can see shadowed properties visually indicated when own property found"
    - "User can switch between beginner/intermediate/advanced difficulty levels"
  artifacts:
    - path: "src/components/Concepts/PrototypeChainBasicsViz.tsx"
      provides: "Vertical chain visualization with progressive node reveal"
      min_lines: 200
    - path: "src/components/Concepts/PropertyLookupViz.tsx"
      provides: "Property lookup animation with shadowing indicators"
      min_lines: 300
  key_links:
    - from: "src/app/concepts/[conceptId]/ConceptPageClient.tsx"
      to: "PrototypeChainBasicsViz"
      via: "dynamic import mapping"
      pattern: "prototype-chain-basics.*PrototypeChainBasicsViz"
    - from: "src/app/concepts/[conceptId]/ConceptPageClient.tsx"
      to: "PropertyLookupViz"
      via: "dynamic import mapping"
      pattern: "property-lookup.*PropertyLookupViz"
---

<objective>
Create PrototypeChainBasicsViz and PropertyLookupViz components showing prototype chain traversal and property lookup with shadowing.

Purpose: Enable learners to visualize JavaScript's prototype chain as a vertical stack (object -> prototype -> Object.prototype -> null) and understand how property lookup walks this chain with explicit shadowing indicators.

Output: Two visualization components covering OOP-01 and OOP-02 requirements, wired to concept routes.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-oop-prototype-visualizations/20-CONTEXT.md
@.planning/phases/20-oop-prototype-visualizations/20-RESEARCH.md
@src/components/Concepts/PrototypesViz.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PrototypeChainBasicsViz component</name>
  <files>
    src/components/Concepts/PrototypeChainBasicsViz.tsx
  </files>
  <action>
Create PrototypeChainBasicsViz.tsx following PrototypesViz.tsx patterns:

**Structure:**
- 'use client' directive at top
- Level selector (beginner/intermediate/advanced) with color-coded badges
- Example selector for each level
- Vertical chain visualization with progressive node reveal

**Step Interface:**
```typescript
interface ChainNode {
  id: string
  name: string
  type: 'instance' | 'prototype' | 'null'
  props: { name: string; value: string }[]
  protoRef: string | null
  color: string
}

interface Step {
  description: string
  visibleNodes: string[]  // Progressive reveal
  highlightNode?: string
  output: string[]
  phase: 'creation' | 'chain-reveal' | 'complete'
}
```

**Examples to create:**
- Beginner: Simple 3-node chain (dog -> Animal.prototype -> Object.prototype -> null)
- Beginner: Object literal chain (user -> Object.prototype -> null)
- Intermediate: Longer chain with Object.create() (child -> parent -> grandparent -> Object.prototype -> null)
- Advanced: null-prototype object (Object.create(null) -> null only)

**Visual elements:**
- Vertical stack layout (matches PrototypesViz)
- Nodes reveal one at a time via steps
- __proto__ arrows between nodes
- Neon box container with gradient border
- Each node shows properties and __proto__ reference
- null node shows "End of chain"

**Use PrototypesViz.module.css** for consistent styling (no new CSS file needed).

Reuse the HeapObject interface and visual patterns from PrototypesViz.tsx.
  </action>
  <verify>
    npm run build -- --filter=PrototypeChainBasicsViz
    grep -l "PrototypeChainBasicsViz" src/components/Concepts/PrototypeChainBasicsViz.tsx
  </verify>
  <done>
    PrototypeChainBasicsViz.tsx exists with 3 difficulty levels, progressive chain reveal, and vertical stack layout matching PrototypesViz patterns.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create PropertyLookupViz component</name>
  <files>
    src/components/Concepts/PropertyLookupViz.tsx
  </files>
  <action>
Create PropertyLookupViz.tsx following PrototypesViz lookup patterns:

**Structure:**
- 'use client' directive at top
- Level selector (beginner/intermediate/advanced)
- Example selector and property selector
- Vertical chain with lookup animation

**Step Interface (extends PrototypesViz lookup):**
```typescript
interface Property {
  name: string
  value: string
  shadowed?: boolean  // New: indicates shadowing
}

interface LookupStep {
  description: string
  searchProperty: string
  currentlyChecking: string | null
  checkedObjects: string[]
  foundAt: string | null  // null = still looking, 'NOT_FOUND' = failed
  shadowedIn?: string  // ID of object where shadowed property exists
  output: string[]
  phase: 'searching' | 'found' | 'not-found'
}
```

**Examples to create (with explicit shadowing focus):**
- Beginner: Simple own property lookup (found immediately)
- Beginner: Inherited property lookup (walk to prototype)
- Intermediate: Property shadowing example (child.value = 4 shadows parent.value = 2)
  - MUST show grayed-out/crossed property in prototype with "(shadowed)" label
- Intermediate: Not found lookup (property doesn't exist anywhere)
- Advanced: hasOwnProperty vs 'in' operator comparison
- Advanced: Multiple levels of shadowing

**Key visual requirements (from CONTEXT.md - locked decisions):**
- Shadowing MUST be explicit with visual indicator
- Grayed out or line-through property in prototype when own property found
- "(shadowed)" label on the shadowed property
- "Found!" badge when property located
- "Not Found" badge with red styling when property not in chain

**Highlight behavior:**
- currentlyChecking object gets border highlight
- checkedObjects get subtle background
- foundAt object gets green glow and scale animation
- Shadowed property in prototype gets gray/crossed styling

Use PrototypesViz.module.css for consistent styling.
  </action>
  <verify>
    npm run build -- --filter=PropertyLookupViz
    grep -l "shadowed" src/components/Concepts/PropertyLookupViz.tsx
  </verify>
  <done>
    PropertyLookupViz.tsx exists with shadowing visualization, lookup animation, 3 difficulty levels, and explicit shadowing indicators matching CONTEXT.md requirements.
  </done>
</task>

<task type="auto">
  <name>Task 3: Wire components to routing</name>
  <files>
    src/components/Concepts/index.ts
    src/app/concepts/[conceptId]/ConceptPageClient.tsx
  </files>
  <action>
**In src/components/Concepts/index.ts:**
Add exports for both new components:
```typescript
export { PrototypeChainBasicsViz } from './PrototypeChainBasicsViz'
export { PropertyLookupViz } from './PropertyLookupViz'
```

**In src/app/concepts/[conceptId]/ConceptPageClient.tsx:**
Update the vizMap to use the new dedicated components instead of PrototypesViz:

Find the existing mappings:
```typescript
'prototype-chain-basics': dynamic(() => import('@/components/Concepts/PrototypesViz').then(m => m.PrototypesViz)),
'property-lookup': dynamic(() => import('@/components/Concepts/PrototypesViz').then(m => m.PrototypesViz)),
```

Replace with:
```typescript
'prototype-chain-basics': dynamic(() => import('@/components/Concepts/PrototypeChainBasicsViz').then(m => m.PrototypeChainBasicsViz)),
'property-lookup': dynamic(() => import('@/components/Concepts/PropertyLookupViz').then(m => m.PropertyLookupViz)),
```

Keep other prototype-related mappings pointing to PrototypesViz until their dedicated components are created.
  </action>
  <verify>
    npm run build
    npm run lint
  </verify>
  <done>
    Both components exported and wired to their concept routes. Build passes. Navigating to /concepts/prototype-chain-basics shows PrototypeChainBasicsViz. Navigating to /concepts/property-lookup shows PropertyLookupViz.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `npm run lint` produces no new warnings
3. Navigate to /concepts/prototype-chain-basics - PrototypeChainBasicsViz renders with level selector
4. Navigate to /concepts/property-lookup - PropertyLookupViz renders with shadowing example
5. Level switching works on both components
6. Step navigation works on both components
7. Shadowing is visually indicated in PropertyLookupViz (grayed/crossed property with label)
</verification>

<success_criteria>
- OOP-01 satisfied: Prototype chain shows object -> prototype -> Object.prototype -> null traversal
- OOP-02 satisfied: Property lookup walks chain with explicit shadowing indicators
- Both components have 3 difficulty levels
- Vertical stack layout matches PrototypesViz patterns
- Mobile responsive (inherits from PrototypesViz CSS patterns)
</success_criteria>

<output>
After completion, create `.planning/phases/20-oop-prototype-visualizations/20-01-SUMMARY.md`
</output>
