---
phase: 20-oop-prototype-visualizations
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Concepts/InstanceofViz.tsx
  - src/components/Concepts/index.ts
  - src/app/concepts/[conceptId]/ConceptPageClient.tsx
autonomous: true

must_haves:
  truths:
    - "User can step through instanceof check walking the prototype chain"
    - "User can see Constructor.prototype highlighted as the target being searched for"
    - "User can see each prototype being compared to the target"
    - "User can see true/false result with visual indicator"
    - "User can switch between beginner/intermediate/advanced difficulty levels"
  artifacts:
    - path: "src/components/Concepts/InstanceofViz.tsx"
      provides: "instanceof operator visualization with chain walk animation"
      min_lines: 350
  key_links:
    - from: "src/app/concepts/[conceptId]/ConceptPageClient.tsx"
      to: "InstanceofViz"
      via: "dynamic import mapping"
      pattern: "instanceof-operator.*InstanceofViz"
---

<objective>
Create InstanceofViz component showing how the instanceof operator checks prototype chain membership.

Purpose: Enable learners to understand that instanceof walks the prototype chain looking for Constructor.prototype, with visual step-by-step chain traversal showing the comparison at each level.

Output: One visualization component covering OOP-03 requirement, wired to the instanceof-operator concept route.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-oop-prototype-visualizations/20-CONTEXT.md
@.planning/phases/20-oop-prototype-visualizations/20-RESEARCH.md
@src/components/Concepts/PrototypesViz.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create InstanceofViz component</name>
  <files>
    src/components/Concepts/InstanceofViz.tsx
  </files>
  <action>
Create InstanceofViz.tsx following PrototypesViz patterns with instanceof semantics:

**Structure:**
- 'use client' directive at top
- Level selector (beginner/intermediate/advanced) with color-coded badges
- Example selector for each level
- Two-part visualization: object's prototype chain AND target Constructor.prototype

**Step Interface:**
```typescript
interface InstanceofStep {
  description: string
  object: string              // e.g., 'dog'
  constructor: string         // e.g., 'Animal'
  targetPrototype: string     // e.g., 'Animal.prototype' - what we're looking for
  currentlyChecking: string | null  // Current prototype being compared
  checkedPrototypes: string[]       // Prototypes already checked
  result: boolean | null      // null = still checking, true/false = done
  phase: 'setup' | 'checking' | 'result'
}
```

**Examples to create:**
- Beginner: `dog instanceof Animal` (true - direct match)
- Beginner: `dog instanceof Object` (true - found in chain)
- Beginner: `dog instanceof Array` (false - not in chain)
- Intermediate: Multiple inheritance levels with extends
- Intermediate: Primitive vs Object constructor (typeof vs instanceof)
- Advanced: Cross-realm instanceof issues (different execution contexts)
- Advanced: Symbol.hasInstance customization

**Visual elements:**
- Left side: Object's prototype chain (vertical stack)
- Right side: Target prototype highlighted with distinct styling (e.g., cyan/teal border)
- Step-by-step: Each prototype compared to target with "=== ?" indicator
- Match animation: When found, both sides glow green with checkmark
- No match: Red X when chain reaches null

**Animation flow:**
1. Show object and its chain
2. Show Constructor.prototype as target (distinct color)
3. Walk chain step by step, comparing each prototype to target
4. At each step: "Checking: obj.__proto__ === Constructor.prototype?"
5. If match: Green glow, checkmark, "true" badge
6. If null reached: Red styling, X mark, "false" badge

**Layout:**
```
+------------------+     +----------------------+
|    dog           |     | Target:              |
|    __proto__     |     | Animal.prototype     |
|       v          |     | (looking for this)   |
| Animal.prototype | === | Animal.prototype     | <- Comparison step
|    __proto__     |     +----------------------+
|       v          |
| Object.prototype |
|    __proto__     |
|       v          |
|     null         |
+------------------+
```

Use PrototypesViz.module.css for base styling. Add inline styles for target highlight (cyan/teal).
  </action>
  <verify>
    npm run build -- --filter=InstanceofViz
    grep -l "instanceof" src/components/Concepts/InstanceofViz.tsx
  </verify>
  <done>
    InstanceofViz.tsx exists with chain walk animation, target prototype highlighting, 3 difficulty levels, and true/false result indicators.
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire InstanceofViz to routing</name>
  <files>
    src/components/Concepts/index.ts
    src/app/concepts/[conceptId]/ConceptPageClient.tsx
  </files>
  <action>
**In src/components/Concepts/index.ts:**
Add export for the new component:
```typescript
export { InstanceofViz } from './InstanceofViz'
```

**In src/app/concepts/[conceptId]/ConceptPageClient.tsx:**
Update the vizMap to use the new dedicated component instead of PrototypesViz:

Find the existing mapping:
```typescript
'instanceof-operator': dynamic(() => import('@/components/Concepts/PrototypesViz').then(m => m.PrototypesViz)),
```

Replace with:
```typescript
'instanceof-operator': dynamic(() => import('@/components/Concepts/InstanceofViz').then(m => m.InstanceofViz)),
```
  </action>
  <verify>
    npm run build
    npm run lint
  </verify>
  <done>
    InstanceofViz exported and wired to instanceof-operator concept route. Build passes. Navigating to /concepts/instanceof-operator shows InstanceofViz.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `npm run lint` produces no new warnings
3. Navigate to /concepts/instanceof-operator - InstanceofViz renders with level selector
4. Level switching works correctly
5. Step navigation walks through instanceof check
6. Target prototype is visually distinct from chain nodes
7. Result (true/false) is clearly indicated with appropriate styling
</verification>

<success_criteria>
- OOP-03 satisfied: instanceof visualization shows prototype chain membership check with visual chain traversal
- Component has 3 difficulty levels
- Target prototype highlighted distinctly
- Chain walk animation shows step-by-step comparison
- True/false results clearly indicated
- Mobile responsive
</success_criteria>

<output>
After completion, create `.planning/phases/20-oop-prototype-visualizations/20-02-SUMMARY.md`
</output>
