---
phase: 20-oop-prototype-visualizations
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Concepts/ClassSyntaxViz.tsx
  - src/components/Concepts/index.ts
  - src/app/concepts/[conceptId]/ConceptPageClient.tsx
autonomous: true

must_haves:
  truths:
    - "User can see ES6 class syntax alongside equivalent prototype code"
    - "User can see that both approaches create the same prototype chain"
    - "User can step through class definition and see prototype setup"
    - "User can see methods go on prototype, instance properties on instance"
    - "User can switch between beginner/intermediate/advanced difficulty levels"
  artifacts:
    - path: "src/components/Concepts/ClassSyntaxViz.tsx"
      provides: "Side-by-side class vs prototype comparison visualization"
      min_lines: 400
  key_links:
    - from: "src/app/concepts/[conceptId]/ConceptPageClient.tsx"
      to: "ClassSyntaxViz"
      via: "dynamic import mapping"
      pattern: "class-syntax-prototypes.*ClassSyntaxViz"
---

<objective>
Create ClassSyntaxViz component showing ES6 class syntax as syntactic sugar over prototype-based inheritance.

Purpose: Enable learners to understand that ES6 classes are syntactic sugar by showing class syntax alongside the equivalent prototype setup, with the same resulting prototype chain visible.

Output: One visualization component covering OOP-04 requirement, wired to the class-syntax-prototypes concept route.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-oop-prototype-visualizations/20-CONTEXT.md
@.planning/phases/20-oop-prototype-visualizations/20-RESEARCH.md
@src/components/Concepts/PrototypesViz.tsx
@src/components/Concepts/AsyncAwaitParallelViz.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ClassSyntaxViz component</name>
  <files>
    src/components/Concepts/ClassSyntaxViz.tsx
  </files>
  <action>
Create ClassSyntaxViz.tsx with side-by-side class/prototype comparison:

**Structure:**
- 'use client' directive at top
- Level selector (beginner/intermediate/advanced) with color-coded badges
- Example selector for each level
- Side-by-side layout: class syntax (left) vs prototype equivalent (right)
- Below: Resulting prototype chain (same for both approaches)

**Step Interface:**
```typescript
interface ClassSyntaxStep {
  description: string
  classCode: string[]         // ES6 class syntax lines
  prototypeCode: string[]     // Equivalent prototype setup lines
  classHighlight?: number     // Line to highlight in class panel
  prototypeHighlight?: number // Line to highlight in prototype panel
  chain: ChainNode[]          // Resulting prototype chain
  createdInstances: string[]  // Instances created so far
  output: string[]            // Console output
  phase: 'class-definition' | 'equivalent-prototype' | 'instantiation' | 'method-call'
}
```

**Examples to create:**
- Beginner: Simple class with constructor and one method
  - Class: `class Animal { constructor(name) { this.name = name } speak() {...} }`
  - Prototype equivalent: `function Animal(name) {...}; Animal.prototype.speak = ...`
- Beginner: Showing typeof Class === "function"
- Intermediate: Static methods (go on constructor, not prototype)
- Intermediate: Getter/setter syntax
- Advanced: Private fields comparison (# vs closure)
- Advanced: Class expressions and hoisting differences

**Visual layout (from CONTEXT.md - side-by-side):**
```
+---------------------------+    +-------------------------------+
| ES6 Class Syntax          |    | Prototype Reality             |
| (purple/violet border)    |    | (amber/orange border)         |
+---------------------------+    +-------------------------------+
| class Animal {            |    | function Animal(name) {       |
|   constructor(name) {     |    |   this.name = name            |
|     this.name = name      |    | }                             |
|   }                       |    |                               |
|   speak() {               |    | Animal.prototype.speak =      |
|     console.log(...)      |    |   function() { ... }          |
|   }                       |    |                               |
| }                         |    |                               |
+---------------------------+    +-------------------------------+

            Resulting Prototype Chain (same either way!)
+------------------------------------------------------------------+
|  new Animal() -> Animal.prototype -> Object.prototype -> null    |
+------------------------------------------------------------------+
```

**Key visual requirements (from CONTEXT.md - locked decisions):**
- Both constructor call mechanics AND prototype chain structure shown
- "Syntactic Sugar" badge/callout to reinforce the concept
- Highlight corresponding lines as steps progress (class line highlights, equivalent prototype line highlights)
- Chain visualization shows the SAME result from both approaches

**Styling:**
- Class panel: Purple/violet border (#a855f7)
- Prototype panel: Amber/orange border (#f59e0b)
- Use CodePanel pattern for code display with line highlighting
- Chain visualization uses PrototypesViz vertical stack pattern
  </action>
  <verify>
    npm run build -- --filter=ClassSyntaxViz
    grep -l "syntactic sugar\|Syntactic Sugar" src/components/Concepts/ClassSyntaxViz.tsx
  </verify>
  <done>
    ClassSyntaxViz.tsx exists with side-by-side comparison, corresponding line highlighting, shared chain visualization, 3 difficulty levels, and "Syntactic Sugar" messaging.
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire ClassSyntaxViz to routing</name>
  <files>
    src/components/Concepts/index.ts
    src/app/concepts/[conceptId]/ConceptPageClient.tsx
  </files>
  <action>
**In src/components/Concepts/index.ts:**
Add export for the new component:
```typescript
export { ClassSyntaxViz } from './ClassSyntaxViz'
```

**In src/app/concepts/[conceptId]/ConceptPageClient.tsx:**
Update the vizMap to use the new dedicated component instead of PrototypesViz:

Find the existing mappings:
```typescript
'class-syntax-sugar': dynamic(() => import('@/components/Concepts/PrototypesViz').then(m => m.PrototypesViz)),
'class-syntax-prototypes': dynamic(() => import('@/components/Concepts/PrototypesViz').then(m => m.PrototypesViz)),
```

Replace with:
```typescript
'class-syntax-sugar': dynamic(() => import('@/components/Concepts/ClassSyntaxViz').then(m => m.ClassSyntaxViz)),
'class-syntax-prototypes': dynamic(() => import('@/components/Concepts/ClassSyntaxViz').then(m => m.ClassSyntaxViz)),
```
  </action>
  <verify>
    npm run build
    npm run lint
  </verify>
  <done>
    ClassSyntaxViz exported and wired to class-syntax-sugar and class-syntax-prototypes concept routes. Build passes. Navigating to /concepts/class-syntax-prototypes shows ClassSyntaxViz.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `npm run lint` produces no new warnings
3. Navigate to /concepts/class-syntax-prototypes - ClassSyntaxViz renders with level selector
4. Side-by-side layout displays correctly (class left, prototype right)
5. Level switching works correctly
6. Step navigation highlights corresponding lines in both panels
7. Chain visualization shows same result for both approaches
8. "Syntactic Sugar" concept is clearly communicated
</verification>

<success_criteria>
- OOP-04 satisfied: Class syntax visualization shows ES6 class as syntactic sugar with underlying prototype structure visible
- Component has 3 difficulty levels
- Side-by-side layout with class/prototype code panels
- Corresponding line highlighting during steps
- Shared prototype chain visualization below
- Mobile responsive (stacks vertically on small screens)
</success_criteria>

<output>
After completion, create `.planning/phases/20-oop-prototype-visualizations/20-03-SUMMARY.md`
</output>
