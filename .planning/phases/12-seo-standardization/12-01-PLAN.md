---
phase: 12-seo-standardization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/seo/breadcrumb.ts
  - src/app/sitemap.ts
autonomous: true

must_haves:
  truths:
    - "Breadcrumb utility generates valid BreadcrumbList JSON-LD"
    - "Sitemap includes all DSA pattern routes"
    - "Sitemap includes all /concepts/dsa/* routes"
    - "Sitemap uses consistent CONTENT_LAST_UPDATED timestamp"
  artifacts:
    - path: "src/lib/seo/breadcrumb.ts"
      provides: "generateBreadcrumbSchema utility function"
      exports: ["generateBreadcrumbSchema", "BreadcrumbItem"]
    - path: "src/app/sitemap.ts"
      provides: "Complete sitemap with all routes and proper timestamps"
      contains: "CONTENT_LAST_UPDATED"
  key_links:
    - from: "src/lib/seo/breadcrumb.ts"
      to: "schema.org BreadcrumbList"
      via: "JSON-LD format output"
      pattern: "@type.*BreadcrumbList"
---

<objective>
Create SEO foundation: breadcrumb utility and complete sitemap

Purpose: Establish reusable breadcrumb generator and fix sitemap coverage gaps before implementing breadcrumbs across pages.
Output: `src/lib/seo/breadcrumb.ts` utility, enhanced `src/app/sitemap.ts` with all routes and proper timestamps.
</objective>

<execution_context>
@/Users/sunnywilson/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sunnywilson/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-seo-standardization/12-RESEARCH.md

# Existing patterns
@src/app/concepts/[conceptId]/page.tsx (has inline generateBreadcrumbSchema)
@src/app/sitemap.ts (current implementation)
@src/data/dsaPatterns.ts (patterns data)
@src/data/dsaConcepts.ts (DSA concepts data)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create breadcrumb utility</name>
  <files>src/lib/seo/breadcrumb.ts</files>
  <action>
Create `src/lib/seo/breadcrumb.ts` with a reusable breadcrumb generator:

```typescript
const BASE_URL = 'https://jsinterview.dev'

export interface BreadcrumbItem {
  name: string
  path?: string  // omit for current page (last item)
}

export function generateBreadcrumbSchema(items: BreadcrumbItem[]) {
  return {
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
    itemListElement: items.map((item, index) => ({
      '@type': 'ListItem',
      position: index + 1,
      name: item.name,
      ...(item.path && { item: `${BASE_URL}${item.path}` }),
    })),
  }
}
```

This consolidates the breadcrumb generation pattern already used in concept pages into a reusable utility. The last item should NOT include `item` property (it's the current page).
  </action>
  <verify>
File exists and exports both `generateBreadcrumbSchema` and `BreadcrumbItem`:
```bash
grep -E "export (function|interface)" src/lib/seo/breadcrumb.ts
```

Test that the utility generates valid JSON-LD structure:
```bash
# Verify JSON-LD structure has required properties
grep -E "@context.*schema.org" src/lib/seo/breadcrumb.ts
grep -E "@type.*BreadcrumbList" src/lib/seo/breadcrumb.ts
grep "itemListElement" src/lib/seo/breadcrumb.ts
grep "ListItem" src/lib/seo/breadcrumb.ts
grep "position" src/lib/seo/breadcrumb.ts
```

Quick functional test - create temp test file and run:
```bash
cat > /tmp/test-breadcrumb.mjs << 'EOF'
const BASE_URL = 'https://jsinterview.dev'

function generateBreadcrumbSchema(items) {
  return {
    '@context': 'https://schema.org',
    '@type': 'BreadcrumbList',
    itemListElement: items.map((item, index) => ({
      '@type': 'ListItem',
      position: index + 1,
      name: item.name,
      ...(item.path && { item: `${BASE_URL}${item.path}` }),
    })),
  }
}

const result = generateBreadcrumbSchema([
  { name: 'Home', path: '/' },
  { name: 'Test' }
])

// Validate structure
const valid = result['@context'] === 'https://schema.org' &&
  result['@type'] === 'BreadcrumbList' &&
  Array.isArray(result.itemListElement) &&
  result.itemListElement.length === 2 &&
  result.itemListElement[0]['@type'] === 'ListItem' &&
  result.itemListElement[0].position === 1 &&
  result.itemListElement[0].item === 'https://jsinterview.dev/' &&
  result.itemListElement[1].item === undefined  // last item has no path

console.log(valid ? 'PASS: Valid JSON-LD structure' : 'FAIL: Invalid structure')
console.log(JSON.stringify(result, null, 2))
process.exit(valid ? 0 : 1)
EOF
node /tmp/test-breadcrumb.mjs
```
  </verify>
  <done>
- `generateBreadcrumbSchema` function exported
- `BreadcrumbItem` interface exported
- BASE_URL constant defined as 'https://jsinterview.dev'
- Output has @context, @type: BreadcrumbList, itemListElement array with ListItem objects
- Last item (no path) does not include `item` property
  </done>
</task>

<task type="auto">
  <name>Task 2: Enhance sitemap with complete routes and proper timestamps</name>
  <files>src/app/sitemap.ts</files>
  <action>
Update `src/app/sitemap.ts` to:

1. Add `CONTENT_LAST_UPDATED` constant at top (use '2026-01-25' based on v1.1 completion date)
2. Replace all `new Date()` with `CONTENT_LAST_UPDATED`
3. Add missing static pages: `/concepts/js`, `/concepts/dsa`, `/js-problems`
4. Add DSA concept pages from `dsaConcepts` data
5. Add DSA pattern pages from `dsaPatterns` data

Import additions:
```typescript
import { dsaConcepts } from '@/data/dsaConcepts'
import { dsaPatterns } from '@/data/dsaPatterns'
```

Add constant:
```typescript
const CONTENT_LAST_UPDATED = new Date('2026-01-25')
```

Add missing static pages to staticPages array:
```typescript
{ url: `${baseUrl}/concepts/js`, lastModified: CONTENT_LAST_UPDATED, changeFrequency: 'monthly', priority: 0.8 },
{ url: `${baseUrl}/concepts/dsa`, lastModified: CONTENT_LAST_UPDATED, changeFrequency: 'monthly', priority: 0.8 },
{ url: `${baseUrl}/js-problems`, lastModified: CONTENT_LAST_UPDATED, changeFrequency: 'weekly', priority: 0.8 },
```

Add DSA concept pages:
```typescript
const dsaConceptPages: MetadataRoute.Sitemap = dsaConcepts.map((concept) => ({
  url: `${baseUrl}/concepts/dsa/${concept.id}`,
  lastModified: CONTENT_LAST_UPDATED,
  changeFrequency: 'monthly' as const,
  priority: 0.8,
}))
```

Add DSA pattern pages:
```typescript
const patternPages: MetadataRoute.Sitemap = dsaPatterns.map((pattern) => ({
  url: `${baseUrl}/concepts/dsa/patterns/${pattern.slug}`,
  lastModified: CONTENT_LAST_UPDATED,
  changeFrequency: 'monthly' as const,
  priority: 0.8,
}))
```

Return all arrays: `[...staticPages, ...conceptPages, ...dsaConceptPages, ...patternPages, ...categoryPages, ...problemPages]`
  </action>
  <verify>
```bash
# Verify patterns are included
grep -c "dsaPatterns" src/app/sitemap.ts  # Should be >= 2

# Verify CONTENT_LAST_UPDATED is used
grep -c "CONTENT_LAST_UPDATED" src/app/sitemap.ts  # Should be >= 5

# Verify no new Date() calls remain
grep -c "new Date()" src/app/sitemap.ts  # Should be 0
```
  </verify>
  <done>
- CONTENT_LAST_UPDATED constant defined
- All `new Date()` replaced with CONTENT_LAST_UPDATED
- /concepts/js, /concepts/dsa, /js-problems in static pages
- DSA concept pages generated from dsaConcepts data
- Pattern pages generated from dsaPatterns data
- All route types included in returned array
  </done>
</task>

</tasks>

<verification>
1. `src/lib/seo/breadcrumb.ts` exists with exported utility
2. Breadcrumb utility generates valid JSON-LD with @context, @type: BreadcrumbList, itemListElement array
3. `src/app/sitemap.ts` generates complete sitemap:
   - Static pages include /concepts/js, /concepts/dsa, /js-problems
   - DSA concepts and patterns have entries
   - No `new Date()` - all use CONTENT_LAST_UPDATED
4. Build succeeds: `npm run build` (verify sitemap generates)
</verification>

<success_criteria>
- Breadcrumb utility ready for import in page files
- Breadcrumb utility output is valid BreadcrumbList JSON-LD structure
- Sitemap includes 100% of public routes
- Sitemap timestamps are consistent (not current date)
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/12-seo-standardization/12-01-SUMMARY.md`
</output>
